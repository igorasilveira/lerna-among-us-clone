{"ast":null,"code":"import _defineProperty from \"/Users/igorsilveira/Documents/Projects/lerna-among-us-clone/packages/app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { JOYSTICK_OUTER_COLOR, JOYSTICK_INNER_COLOR, STROKE_WEIGHT } from '../constants/joystick'; // TODO add joystick interface\n\nexport default class Joystick {\n  constructor(x, y, radius, p5Instance) {\n    _defineProperty(this, \"controls\", void 0);\n\n    _defineProperty(this, \"finger\", void 0);\n\n    _defineProperty(this, \"stickpos\", void 0);\n\n    _defineProperty(this, \"value\", void 0);\n\n    _defineProperty(this, \"pos\", void 0);\n\n    _defineProperty(this, \"radius\", void 0);\n\n    _defineProperty(this, \"p5\", void 0);\n\n    _defineProperty(this, \"render\", function () {\n      this.p5.stroke(...JOYSTICK_OUTER_COLOR);\n      this.p5.strokeWeight(STROKE_WEIGHT);\n      this.p5.fill(...JOYSTICK_OUTER_COLOR);\n      this.p5.ellipse(this.pos.x, this.pos.y, this.radius); // if (this.controls) {\n\n      this.p5.fill(...JOYSTICK_INNER_COLOR);\n      this.p5.strokeWeight(5);\n      this.p5.line(this.pos.x, this.pos.y, this.stickpos.x, this.stickpos.y);\n      this.p5.strokeWeight(0);\n      this.p5.ellipse(this.stickpos.x, this.stickpos.y, this.radius / 3); // }\n    });\n\n    _defineProperty(this, \"update\", function () {\n      if (this.controls) {\n        this.finger = this.p5.createVector(this.p5.mouseX, this.p5.mouseY);\n        this.stickpos = this.p5.createVector(this.finger.x - this.pos.x, this.finger.y - this.pos.y);\n        this.stickpos.limit(this.radius / 2);\n        this.value.x = this.stickpos.x;\n        this.value.y = this.stickpos.y;\n        this.stickpos = this.p5.createVector(this.pos.x + this.stickpos.x, this.pos.y + this.stickpos.y);\n        return {\n          x: this.getX(0.05),\n          y: this.getY(0.7)\n        };\n      }\n\n      return {\n        x: 0,\n        y: 0\n      };\n    });\n\n    this.p5 = p5Instance;\n    this.pos = this.p5.createVector(x, y);\n    this.radius = radius;\n    this.stickpos = this.p5.createVector(x, y);\n    this.controls = false;\n    this.value = this.p5.createVector(0, 0);\n  }\n\n  activateJoystick(activate) {\n    this.finger = this.p5.createVector(this.p5.mouseX, this.p5.mouseY);\n    const distance = this.p5.dist(this.finger.x, this.finger.y, this.pos.x, this.pos.y);\n\n    if (distance < this.radius / 2 && activate) {\n      this.controls = true;\n    } else {\n      this.stickpos.x = this.pos.x;\n      this.stickpos.y = this.pos.y;\n      this.controls = false;\n    }\n  }\n\n  clicked() {\n    this.activateJoystick(this.p5.mouseX < this.p5.windowWidth / 2);\n  }\n\n  updateValue(v) {\n    this.value = this.value.mult(v);\n  }\n\n  getX(multiplier) {\n    this.updateValue(multiplier);\n    return this.value.x;\n  }\n\n  getY(multiplier) {\n    this.updateValue(multiplier);\n    return this.value.y;\n  }\n\n}","map":{"version":3,"sources":["/Users/igorsilveira/Documents/Projects/lerna-among-us-clone/packages/app/classes/Joystick.ts"],"names":["JOYSTICK_OUTER_COLOR","JOYSTICK_INNER_COLOR","STROKE_WEIGHT","Joystick","constructor","x","y","radius","p5Instance","p5","stroke","strokeWeight","fill","ellipse","pos","line","stickpos","controls","finger","createVector","mouseX","mouseY","limit","value","getX","getY","activateJoystick","activate","distance","dist","clicked","windowWidth","updateValue","v","mult","multiplier"],"mappings":"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","sourcesContent":["import * as p5Types from 'p5';\n\nimport {JOYSTICK_OUTER_COLOR, JOYSTICK_INNER_COLOR, STROKE_WEIGHT} from '../constants/joystick';\n\n// TODO add joystick interface\nexport default class Joystick {\n  controls;\n\n  finger;\n\n  stickpos;\n\n  value;\n\n  pos;\n\n  radius;\n\n  p5: p5Types;\n\n  render = function() {\n    this.p5.stroke(...JOYSTICK_OUTER_COLOR);\n    this.p5.strokeWeight(STROKE_WEIGHT);\n    this.p5.fill(...JOYSTICK_OUTER_COLOR);\n    this.p5.ellipse(this.pos.x, this.pos.y, this.radius);\n\n    // if (this.controls) {\n    this.p5.fill(...JOYSTICK_INNER_COLOR);\n    this.p5.strokeWeight(5);\n    this.p5.line(this.pos.x, this.pos.y, this.stickpos.x, this.stickpos.y);\n    this.p5.strokeWeight(0);\n    this.p5.ellipse(this.stickpos.x, this.stickpos.y, this.radius / 3);\n    // }\n  };\n\n  update = function() {\n    if (this.controls) {\n      this.finger = this.p5.createVector(this.p5.mouseX, this.p5.mouseY);\n      this.stickpos = this.p5.createVector(this.finger.x - this.pos.x, this.finger.y - this.pos.y);\n      this.stickpos.limit(this.radius / 2);\n      this.value.x = this.stickpos.x;\n      this.value.y = this.stickpos.y;\n      this.stickpos = this.p5.createVector(this.pos.x + this.stickpos.x, this.pos.y + this.stickpos.y);\n\n      return {\n        x: this.getX(0.05),\n        y: this.getY(0.7),\n      };\n    }\n\n    return {\n      x: 0,\n      y: 0,\n    };\n  };\n\n  constructor(x, y, radius, p5Instance: p5Types) {\n    this.p5 = (p5Instance as p5Types);\n    this.pos = this.p5.createVector(x, y);\n    this.radius = radius;\n    this.stickpos = this.p5.createVector(x, y);\n    this.controls = false;\n    this.value = this.p5.createVector(0, 0);\n  }\n\n\n  activateJoystick(activate: boolean) {\n    this.finger = this.p5.createVector(this.p5.mouseX, this.p5.mouseY);\n    const distance = this.p5.dist(this.finger.x, this.finger.y, this.pos.x, this.pos.y);\n    if (distance < this.radius / 2 && activate) {\n      this.controls = true;\n    } else {\n      this.stickpos.x = this.pos.x;\n      this.stickpos.y = this.pos.y;\n      this.controls = false;\n    }\n  }\n\n  clicked() {\n    this.activateJoystick(this.p5.mouseX < this.p5.windowWidth / 2);\n  }\n\n  updateValue(v) {\n    this.value = this.value.mult(v);\n  }\n\n  getX(multiplier: number) {\n    this.updateValue(multiplier);\n    return this.value.x;\n  }\n\n  getY(multiplier: number) {\n    this.updateValue(multiplier);\n    return this.value.y;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}